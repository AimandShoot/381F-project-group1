<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <title>Transactions</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  
<body>
	<div class="container text-left">
    		<p><h1>Welcome! <%= username %></h1></p>
    		<hr class="my-4">
	</div></br>
	
    <h2>Add New Transaction</h2>
    <hr class="my-4">
    <form method="POST" action="/transactions">
    <div class="row g-3">
   	<div class="col-sm-3">
        	<input class="form-control" name="type" placeholder="Type (income/expense)" required />
        </div>
        
        <div class="col-sm-3">
        	<input class="form-control" name="amount" type="number" placeholder="Amount" required />
        </div>
        
        <div class="col-sm-3">
        	<input class="form-control" name="description" placeholder="Description" />
        </div>
        
        <div class="col-auto"><button class="btn btn-primary" type="submit">Create</button></div>
     </div>
    </form></br>


    <h2>Existing Transactions</h2>
    <hr class="my-4">
    <ul>
        <% transactions.forEach(transaction => { %>
            <li>Type: <%= transaction.type %> , Amount: <%= transaction.amount %> , 
                Description: <%= transaction.description %>
                
   <!-- Delete -->
   <form method="POST" action="/transactions/<%= transaction._id %>?_method=DELETE" style="display:inline;">
       <button class="btn btn-danger" type="submit">Delete</button></br>
   </form>

    <!-- Update -->
    </br><form method="POST" action="/transactions/<%= transaction._id %>?_method=PUT" style="display:inline;">
    <div class="row g-3">
    <div class="col-sm-3">
        <input class="form-control" name="type" placeholder="New Type (income/expense)" required /> </div>
        <div class="col-sm-3">
        <input class="form-control" name="amount" type="number" placeholder="New Amount" required /> </div>
        <div class="col-sm-3">
        <input class="form-control" name="description" placeholder="New Description" /> </div>
        
        <div class="col-auto"> <p><button class="btn btn-primary" type="submit">Update</button></p></div>
    </div>
</form>
                
    </li>
        <% }) %>
    </ul>

    <!-- Logout Form -->
    <form method="POST" action="/logout" style="display:inline;">
        <button class="btn btn-primary" type="submit">Logout</button>
    </form>

</body>
</html>
